<?xml version="1.0" encoding="utf-8"?> 
<rss version="2.0">
 <channel>
  <title>My Awesome Blog: Posts tagged 'cs246'</title>
  <description>My Awesome Blog: Posts tagged 'cs246'</description>
  <link>https://cwang.me/tags/cs246.html</link>
  <lastBuildDate>Sun, 21 Jun 2015 00:11:00 UT</lastBuildDate>
  <pubDate>Sun, 21 Jun 2015 00:11:00 UT</pubDate>
  <ttl>1800</ttl>
  <item>
   <title>Some tips for CS246 assignments</title>
   <link>https://cwang.me/blog/2015/06/20/some-tips-for-cs246-assignments/?utm_source=cs246&amp;utm_medium=RSS</link>
   <guid>urn:https-cwang-me:-blog-2015-06-20-some-tips-for-cs246-assignments</guid>
   <pubDate>Sun, 21 Jun 2015 00:11:00 UT</pubDate>
   <description>&lt;html&gt;
&lt;p&gt;CS 246 is a complicated course. Anyone who says CS 246 is easy probably already knew everything in it. The tools and best practices outlined below are all things that will help you stay organized and become a better programmer in 246.&lt;/p&gt;
&lt;!-- more--&gt;

&lt;h1 id="uml"&gt;UML&lt;/h1&gt;

&lt;p&gt;If you hate doing layout by hand, you&amp;rsquo;ll appreciate &lt;a href="http://www.planttext.com/"&gt;PlantText&lt;/a&gt;, an online UML editor that renders very nice looking UML diagrams from a text format that basically resembles Java pseudocode.&lt;/p&gt;

&lt;p&gt;The UML basics can be found in the provided samples in the dropdown menu above the editor, under &lt;strong&gt;Class Diagram&lt;/strong&gt;. Examples 1 and 2 are the most relevant.&lt;/p&gt;

&lt;p&gt;To get rid of the icons and other spurious style features, put&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;skinparam classAttributeIconSize 0
skinparam circledCharacterRadius 0
skinparam circledCharacterFontSize 0&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;in your UML text.&lt;/p&gt;

&lt;h1 id="compiler-switches"&gt;Compiler switches&lt;/h1&gt;

&lt;p&gt;Use these when compiling your code. Add them to your makefiles too, of course.&lt;/p&gt;

&lt;h2 id="be-pedantic"&gt;Be pedantic&lt;/h2&gt;

&lt;p&gt;When compiling, use the switch &lt;code&gt;-pedantic&lt;/code&gt;. It&amp;rsquo;ll turn on more warnings, and we&amp;rsquo;re most likely not going to get into weird edge cases where those warnings can be ignored. Warnings are good, because they often hint at a bug or something you didn&amp;rsquo;t intend to do. Only ignore them if you know what you&amp;rsquo;re doing (I almost never ignore warnings).&lt;/p&gt;

&lt;h2 id="follow-a-standard"&gt;Follow a standard&lt;/h2&gt;

&lt;p&gt;Use &lt;code&gt;-std=c++03&lt;/code&gt; because you don&amp;rsquo;t want to get caught using compiler extensions that they won&amp;rsquo;t support. For example, &lt;a href="https://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html#Variable-Length"&gt;variable-length arrays&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id="a-wall-of-warnings"&gt;A wall of warnings&lt;/h2&gt;

&lt;p&gt;Use &lt;code&gt;-Wall&lt;/code&gt;. Enabling all warnings on an existing codebase is impractical but for our tiny programs it&amp;rsquo;s a good idea (see entry on pedantic mode above).&lt;/p&gt;

&lt;h1 id="tools"&gt;Tools&lt;/h1&gt;

&lt;h2 id="cppcheck"&gt;cppcheck&lt;/h2&gt;

&lt;p&gt;Static analysis tools check your program for bugs without actually running them. An simple tool is &lt;a href="http://cppcheck.sourceforge.net/"&gt;cppcheck&lt;/a&gt;. It can check for a variety of errors. For example, it detected that I had forgotten to copy over a field in an assignment operator overload. It can also check for very simple memory leaks. Here&amp;rsquo;s a &lt;a href="http://sourceforge.net/p/cppcheck/wiki/ListOfChecks/"&gt;list of all the things it can check for&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id="clang-analyze"&gt;clang-analyze&lt;/h2&gt;

&lt;p&gt;Similar to cppcheck, &lt;a href="http://clang-analyzer.llvm.org/"&gt;clang-analyze&lt;/a&gt; is another command-line tool you can use to check your code for bugs. This one is already installed on the student environment along with clang. Use it by invoking &lt;a href="http://clang-analyzer.llvm.org/scan-build.html"&gt;scan-build&lt;/a&gt;. For example, it can find unused variables.&lt;/p&gt;

&lt;p&gt;Usage: &lt;code&gt;scan-build make&lt;/code&gt;&lt;/p&gt;

&lt;h2 id="valgrind"&gt;Valgrind&lt;/h2&gt;

&lt;p&gt;Valgrind was introduced to us as a memory leak checker but it can do a lot more than that. It can find memory errors in general, such as use-after-free, and using uninitialized memory. A full explanation of all the memory explanations can be found in the &lt;a href="http://valgrind.org/docs/manual/mc-manual.html#mc-manual.errormsgs"&gt;Valgrind docs&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Don&amp;rsquo;t panic if Valgrind reports a memory &amp;ldquo;leak&amp;rdquo;, especially in a program that doesn&amp;rsquo;t allocate any memory explicitly. Near the end of the course, you&amp;rsquo;ll be linking to external libraries for your assignments, such as X11 for A4 and A5. These libraries, and even the C++ standard library aren&amp;rsquo;t as strict as CS 136/246 about freeing memory at exit, and Valgrind will notice. But this isn&amp;rsquo;t a memory &lt;em&gt;leak&lt;/em&gt; per se, because the OS will reclaim that memory anyway. This will show up in the heap summary as &amp;ldquo;in use at exit&amp;rdquo;, and in the leak summary as &amp;ldquo;still reachable&amp;rdquo;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ less valgrind.log
==17073== Memcheck, a memory error detector
==17073== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==17073== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==17073== Command: ./cc3k
==17073== Parent PID: 16720
==17073==
==17073==
==17073== HEAP SUMMARY:
==17073==     in use at exit: 411,048 bytes in 183 blocks
==17073==   total heap usage: 194 allocs, 11 frees, 415,292 bytes allocated
==17073==
==17073== LEAK SUMMARY:
==17073==    definitely lost: 0 bytes in 0 blocks
==17073==    indirectly lost: 0 bytes in 0 blocks
==17073==      possibly lost: 0 bytes in 0 blocks
==17073==    still reachable: 411,048 bytes in 183 blocks
==17073==         suppressed: 0 bytes in 0 blocks
==17073== Rerun with --leak-check=full to see details of leaked memory
==17073==
==17073== For counts of detected and suppressed errors, rerun with: -v
==17073== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 2 from 2)&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You can safely ignore these, and Marmoset won&amp;rsquo;t flag these either. You can check exactly where these allocations are happening with &lt;code&gt;--leak-check=full&lt;/code&gt;, where you should see stack traces of library code and not your own.&lt;/p&gt;

&lt;p&gt;Since Valgrind does slow your program down you can compile your program with some optimizations enabled with &lt;code&gt;-O1&lt;/code&gt;. The Valgrind docs will warn you that this can fudge up line numbers, but I haven&amp;rsquo;t seen this happen with my code.&lt;/p&gt;

&lt;p&gt;Usage: &lt;code&gt;valgrind ./yourbinary&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id="a-better-runsuite"&gt;A Better runSuite&lt;/h2&gt;

&lt;p&gt;To help catch obscure formatting errors, you can modify your runSuite script to print a diff of the test output compared to the expected output. I prefer the formatting of git diff, so I would modify my runSuite to run this upon failure:&lt;/p&gt;

&lt;div class="brush: bash"&gt;
 &lt;pre&gt;&lt;code&gt;git --no-pager diff --no-index "$actual" "$expected"&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;If you&amp;rsquo;re using git diff, the &lt;code&gt;--no-index&lt;/code&gt; switch is necessary because you don&amp;rsquo;t want to compare within a git tree. As well, &lt;code&gt;--no-pager&lt;/code&gt; prevents the command from running a pager like &lt;code&gt;less&lt;/code&gt;, which is useful because you&amp;rsquo;ll probably want to redirect the output somewhere yourself.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;What tips do you have for CS 246?&lt;/p&gt;&lt;/html&gt;</description></item>
  <item>
   <title>My CS 246/136 workflow, or how to fork a git repository</title>
   <link>https://cwang.me/blog/2015/05/08/my-cs-246-136-workflow-or-how-to-fork-a-git-repository/?utm_source=cs246&amp;utm_medium=RSS</link>
   <guid>urn:https-cwang-me:-blog-2015-05-08-my-cs-246-136-workflow-or-how-to-fork-a-git-repository</guid>
   <pubDate>Fri, 08 May 2015 19:25:06 UT</pubDate>
   <description>&lt;html&gt;
&lt;p&gt;The instructions for CS 246 are quite simple: clone the course repository so that you have your own local copy, and then pull from it periodically while committing to it for your own assignments. This is fine, but then you have to resort to rsync or scp to keep files synchronized between the linux.student.cs servers and your own computer; realistically, not everyone wants to ssh in and use vim. These instructions will show you how to have your own local repository that you can sync with a remote one using only git, which I find quite convenient. I used this for CS 136 and I&amp;rsquo;m using it now for CS 246.&lt;/p&gt;
&lt;!-- more--&gt;

&lt;p&gt;The goal here is to have a central repository of sorts, just for synchronization. It replicates GitHub&amp;rsquo;s &amp;ldquo;fork&amp;rdquo; functionality by giving you your own remote repository that you can push to. This is desirable because syncing files becomes a simple git pull/git push (and maybe a merge or two), and the student environment servers have good &lt;a href="http://math.uwaterloo.ca/math-faculty-computing-facility/recover-files"&gt;backups&lt;/a&gt; and uptime&amp;mdash;they likely won&amp;rsquo;t fail completely, unlike your cheap laptop. Also, if the student environment goes down, it&amp;rsquo;s not your responsibility to fix it (ie. courses will make accommodations for it), unlike your laptop.&lt;/p&gt;

&lt;p&gt;If you haven&amp;rsquo;t set up SSH keys yet, I recommend you do so first. The &lt;a href="https://help.ubuntu.com/community/SSH/OpenSSH/Keys"&gt;Ubuntu docs&lt;/a&gt; are a good guide. If you have SSH keys set up, replace the HTTPS URLs below with the corresponding SSH ones.&lt;/p&gt;

&lt;p&gt;First set up a bare clone of the repository.&lt;/p&gt;

&lt;div class="brush: bash"&gt;
 &lt;pre&gt;&lt;code&gt;cd ~/cs246
git clone --bare https://git.uwaterloo.ca/cs246/1155.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then clone it again for your own working copy of it.&lt;/p&gt;

&lt;div class="brush: bash"&gt;
 &lt;pre&gt;&lt;code&gt;git clone 1155.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;On your own computer, clone using ssh from your own bare repository. Don&amp;rsquo;t forget to clone from the bare repository; note that by convention bare repositories are appended with .git.&lt;/p&gt;

&lt;div class="brush: bash"&gt;
 &lt;pre&gt;&lt;code&gt;git clone ssh://userid@linux.student.cs.uwaterloo.ca/~/cs246/1155.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then in both systems, you need to add an &amp;ldquo;upstream&amp;rdquo; URL so that you can fetch and pull from the offical course repository. The name doesn&amp;rsquo;t have to be upstream, but remember to use the correct name in the other commands.&lt;/p&gt;

&lt;div class="brush: bash"&gt;
 &lt;pre&gt;&lt;code&gt;git remote add upstream https://git.uwaterloo.ca/cs246/1155.git&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Now to &amp;ldquo;pull from upstream&amp;rdquo; you need to first fetch, and then merge. This is what you do instead of git pull if you want to update from the course repository to get new assignments and handouts. CS 246 should stay on the master branch.&lt;/p&gt;

&lt;div class="brush: bash"&gt;
 &lt;pre&gt;&lt;code&gt;git fetch upstream
git merge upstream/master&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;To synchronize files between your computer and the linux.student.cs servers, use git pull/push. For example, you could be working on assignment and finish part of it in one night. You commit and push. Then the next day you can go to a computer lab, log in, and pull to resume work from where you left off. Of course, this workflow is also compatible with other workflows such as the &lt;a href="https://www.atlassian.com/git/tutorials/comparing-workflows/feature-branch-workflow"&gt;feature branch workflow&lt;/a&gt;, but it might be overkill for assignments.&lt;/p&gt;&lt;/html&gt;</description></item></channel></rss>